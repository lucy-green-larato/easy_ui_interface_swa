/* === Global Styles === */
:root {
  /* Column sizing: tweak these to rebalance widths */
  --left-min: 420px;
  --middle-min: 620px;   /* script gets a bit more room */
  --right-min: 380px;

  --col-left: 1fr;
  --col-middle: 1.45fr;  /* middle grows more */
  --col-right: 1fr;

  --bg: #f8f9fa;
  --card-bg: #fff;
  --border: #e2e5ea;
  --text-1: #1d2129;
  --text-2: #5b6270;
  --accent: #2458e6;
  --accent-pressed: #1f49be;
  --danger: #b00020;
  --ok: #0a7f2e;
  --radius: 10px;
  --ring: 2px solid rgba(36,88,230,.35);
  --shadow: 0 1px 2px rgba(0,0,0,.06), 0 6px 24px rgba(0,0,0,.06);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font: 16px/1.45 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
  background: #fff;
  color: var(--text-1);
}

h1, h2, h3 { margin: 0 0 .5rem; line-height: 1.2; font-weight: 600; }
h1 { font-size: 1.5rem; }
h2 { font-size: 1.25rem; }
h3 { font-size: 1.1rem; }

/* === Header === */
.app-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: .75rem;
  padding: 12px 24px;
  background: var(--card-bg);
  border-bottom: 1px solid var(--border);
}
.header-left{ display:flex; align-items:center; gap:.75rem; min-width:0; flex:1 1 auto; }
.logo{ max-width: 56px; max-height: 56px; width:auto; height:auto; object-fit:contain; flex-shrink:0; }
.brand-text{ display:flex; flex-direction:column; min-width:0; }
.app-title{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.kicker{ font-size:.875rem; color:var(--text-2); margin-top:.125rem; }

.header-right{ display:flex; align-items:center; gap:.5rem; flex:0 0 auto; }

/* Sales model chip */
.calltype-mini{
  display:inline-flex; align-items:center; gap:.6rem;
  padding: 8px 12px;
  border-radius:999px;
  background:#eef0f4;
  border:1px solid var(--border);
  font-size:.95rem;
  white-space:nowrap;
}
.calltype-mini .mini-label{ font-weight:600; }
.calltype-mini select{
  padding:6px 10px; border-radius:8px; border:1px solid #cfd7eb; background:#fff;
}

/* Sales model note pill */
.model-note{
  display:inline-flex; align-items:center; gap:.35rem;
  padding:6px 10px; border-radius:999px;
  background:#eef0f4; border:1px solid var(--border);
  color:var(--text-2); font-size:.9rem;
}

/* User badge */
.badge{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:6px 10px; border-radius:999px;
  background:#eef0f4; border:1px solid var(--border);
  font-size:.9rem; color:var(--text-1); white-space:nowrap;
}
.badge svg{ width:16px; height:16px; stroke:currentColor; fill:none; stroke-width:2; }
.badge.is-hidden{ display:none; }

/* === Layout: true 3-column grid ===================================== */
.layout{
  display: grid;
  gap: 24px;
  padding: 24px;
  align-items: start;
  grid-template-columns:
    minmax(var(--left-min),  var(--col-left))
    minmax(var(--middle-min),var(--col-middle))
    minmax(var(--right-min), var(--col-right));
  max-width: none;
  width: 100%;
}

/* Ensure each panel occupies its column */
.panel.left   { grid-column: 1; }
.panel.middle { grid-column: 2; }
.panel.right  { grid-column: 3; }

/* Panels themselves are transparent â€” cards inside provide the single white box */
.panel{
  background: transparent;
  border: 0;
  border-radius: 0;
  padding: 0;
}

/* === Cards & legends (single white card; no doubles) ================ */
.card{
  background: var(--card-bg);
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  margin: 0 0 16px;
  box-shadow: var(--shadow);
}

/* If a card ever nests inside a card, strip the inner one to avoid double boxes */
.card .card{
  background: transparent;
  border: 0;
  box-shadow: none;
  padding: 0;
  margin: 0;
}

fieldset{ border:0; margin:0; padding:0; }
.card > legend{
  display:inline-block; margin:0 0 12px; padding:0 .25rem; font-size:1.125rem; font-weight:700;
}

/* === Form fields ===================================================== */
.grid-2{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.field{ margin-bottom: 12px; }
label{ display:block; margin-bottom:6px; font-weight:600; }
.req{ color: var(--danger); }

input, select, textarea{
  width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e5e8ee; background:#fff;
  outline:none; transition: box-shadow .15s ease, border-color .15s ease;
}
input:focus, select:focus, textarea:focus{ box-shadow: var(--ring); border-color: var(--accent); }
input.invalid, select.invalid, textarea.invalid{ border-color: var(--danger); }
.help{ margin:.25rem 0 0; color:var(--text-2); font-size:.9rem; }
.error{ min-height:1.1rem; color:var(--danger); font-size:.9rem; margin:.25rem 0 0; }
.error-inline{ color:var(--danger); font-size:.85rem; margin-left:.25rem; }

/* === Buttons / actions ============================================== */
.actions{ display:flex; gap: 12px; align-items:center; margin-top: 16px; flex-wrap:wrap; }
.btn{
  display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px;
  border:1px solid #e5e8ee; background:#fff; cursor:pointer; font-weight:600;
}
.btn.small{ padding:6px 10px; font-size:.9rem; }
.btn[disabled]{ opacity:.55; cursor:not-allowed; }
.btn.primary{ background: var(--accent); color:#fff; border-color: transparent; }
.btn.primary:hover{ background: var(--accent-pressed); }
.spinner{ width:16px; height:16px; border-radius:50%; border:2px solid rgba(255,255,255,.5); border-top-color:#fff; display:none; }
.btn.primary.busy .spinner{ display:inline-block; animation:spin .9s linear infinite; }
@keyframes spin{ to{ transform: rotate(360deg); } }

.status{ margin-top:8px; min-height:1.2rem; color:var(--text-2); }
.status[data-kind="error"]{ color: var(--danger); }
.status[data-kind="ok"]{ color: var(--ok); }

/* === Generated Script ================================================= */
.output-card .output-head{ display:flex; align-items:baseline; justify-content:space-between; gap: 12px; }
.output-card .meta{ color: var(--text-2); font-size:.9rem; }
.output{
  white-space: pre-wrap;
  background: #fff;
  color:#1f2937;
  border: 1px solid #e5e7eb;
  padding: 12px;
  border-radius: 8px;
  min-height: 180px;
  outline: none;
}
.change-log, .activity{ margin-top: 16px; }
.pill{ display:inline-block; padding:2px 8px; border-radius:999px; background:#eef0f4; font-size:.85rem; margin-left:6px; }

/* === Buyer needs ===================================================== */
.intel .intel-head{ display:flex; align-items:center; justify-content:space-between; gap: 12px; }

/* Two columns by default on desktop; three on ultra-wide */
.intel-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(260px, 1fr));
  gap: 12px;
}

/* Flat tiles (content-first) */
.intel-grid section{ background: transparent; padding: 0; }
.intel-slot{
  background: transparent;
  border-radius: 0;
  padding: 0;
  color: var(--text-2);
  min-height: 0;
}

/* === Responsive breakpoints ========================================= */
@media (min-width: 1600px){
  .intel-grid{ grid-template-columns: repeat(3, minmax(260px, 1fr)); }
  /* give the middle column extra breathing room on very wide displays */
  :root{ --middle-min: 720px; --col-middle: 1.6fr; --col-right: 0.9fr; }
}

/* Laptops / medium screens: 2 columns; Buyer needs spans full width below */
@media (max-width: 1200px){
  .layout{ grid-template-columns: 1fr 1fr; }
  .panel.left   { grid-column: 1; }
  .panel.middle { grid-column: 2; }
  .panel.right  { grid-column: 1 / -1; }            /* spans both columns */
  .intel-grid   { grid-template-columns: repeat(2, minmax(220px, 1fr)); }
}

/* Tablets */
@media (max-width: 800px){
  .layout{ grid-template-columns: 1fr; }
  .panel.left, .panel.middle, .panel.right { grid-column: 1; }
  .intel-grid { grid-template-columns: 1fr; }
}

/* Utility */
.muted{ color: var(--text-2); }
