{
  "routes": [
    { "route": "/",                "rewrite": "/index.html" },

    { "route": "/reports",         "rewrite": "/reports.html" },
    { "route": "/reports/*",       "rewrite": "/reports.html" },

    { "route": "/engagement",      "rewrite": "/engagement/index.html" },
    { "route": "/engagement/*",    "rewrite": "/engagement/index.html" },

    { "route": "/qualification",   "rewrite": "/qualification/index.html" },
    { "route": "/qualification/*", "rewrite": "/qualification/index.html" },

    { "route": "/campaign",        "rewrite": "/campaign/index.html" },
    { "route": "/campaign/*",      "rewrite": "/campaign/index.html" },

  
    { "route": "/.auth/*",         "rewrite": "http://localhost:7072/api/.auth/{*}", "allowedRoles": ["anonymous"] },

   
    { "route": "/api/campaign/*",  "rewrite": "http://localhost:7071/api/campaign/{*}", "allowedRoles": ["anonymous"] },
    { "route": "/api/runs",        "rewrite": "http://localhost:7071/api/runs",         "allowedRoles": ["anonymous"] },

   
    { "route": "/api/pbi-token",   "rewrite": "http://localhost:7072/api/pbi-token",     "allowedRoles": ["anonymous"] },
    { "route": "/api/generate/*",  "rewrite": "http://localhost:7072/api/generate/{*}",  "allowedRoles": ["anonymous"] },
    { "route": "/api/*",           "rewrite": "http://localhost:7072/api/{*}",           "allowedRoles": ["anonymous"] },

    { "route": "/content/call-library/*", "allowedRoles": ["anonymous","authenticated"], "headers": { "cache-control": "no-store" } },
    { "route": "/src/*",                 "allowedRoles": ["anonymous","authenticated"] },

    { "route": "/*.html", "headers": { "cache-control": "no-cache" } },
    { "route": "/*.css",  "headers": { "cache-control": "public, max-age=31536000, immutable" } },
    { "route": "/*.js",   "headers": { "cache-control": "public, max-age=31536000, immutable" } },
    { "route": "/*.mjs",  "headers": { "cache-control": "public, max-age=31536000, immutable" } },
    { "route": "/assets/*","headers": { "cache-control": "public, max-age=31536000, immutable" } }
  ],
  "navigationFallback": {
    "rewrite": "/index.html",
    "exclude": [
      "/.auth/*",
      "/api/*",
      "/content/*",
      "/src/*",
      "/reports", "/reports/*",
      "/engagement", "/engagement/*",
      "/qualification", "/qualification/*",
      "/campaign", "/campaign/*",
      "/*.css", "/*.js", "/*.mjs", "/*.json", "/*.png", "/*.jpg", "/*.gif", "/*.svg", "/*.ico"
    ]
  },
  "globalHeaders": {
    "Referrer-Policy": "strict-origin-when-cross-origin",
    "X-Content-Type-Options": "nosniff"
  }
}
